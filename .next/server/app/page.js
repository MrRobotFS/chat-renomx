(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8081:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(908),r(7834),r(5866);var s=r(3191),a=r(8716),o=r(7922),n=r.n(o),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,908)),"/Users/maximilianocarrionorozco/Documents/Projects/chat-renomx/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,7834)),"/Users/maximilianocarrionorozco/Documents/Projects/chat-renomx/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/maximilianocarrionorozco/Documents/Projects/chat-renomx/app/page.tsx"],u="/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8101:(e,t,r)=>{Promise.resolve().then(r.bind(r,6074))},7143:(e,t,r)=>{Promise.resolve().then(r.bind(r,9689)),Promise.resolve().then(r.bind(r,3136))},205:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},6074:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(326),a=r(7577),o=r(5047),n=r(3136),i=r(8);function l({variant:e="primary",size:t="md",className:r="",children:a,...o}){return s.jsx("button",{className:`font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-primary hover:bg-primary-600 text-white focus:ring-primary",secondary:"bg-secondary hover:bg-secondary-600 text-dark focus:ring-secondary",outline:"border-2 border-primary text-primary hover:bg-primary hover:text-white focus:ring-primary"}[e]} ${{sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-base",lg:"px-6 py-4 text-lg"}[t]} ${r}`,...o,children:a})}function d({label:e,error:t,className:r="",...a}){return(0,s.jsxs)("div",{className:"space-y-2",children:[e&&s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e}),s.jsx("input",{className:`input-field ${t?"border-red-500 focus:ring-red-500":""} ${r}`,...a}),t&&s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t})]})}function c({onLoginSuccess:e,onLoginError:t,onInputChange:r}){let[o,n]=(0,a.useState)({username:"",password:""}),[c,u]=(0,a.useState)(!1),m=async s=>{s.preventDefault(),u(!0),r?.();try{let r=await i.x.login(o);r.success?e(r.user,r.access):t("Invalid credentials")}catch(e){console.error("Login failed:",e),t(e instanceof Error?e.message:"Login failed")}finally{u(!1)}},h=e=>t=>{r?.(),n(r=>({...r,[e]:t.target.value}))};return(0,s.jsxs)("form",{className:"space-y-6",onSubmit:m,children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Usuario o Correo"}),s.jsx(d,{id:"username",name:"username",type:"text",autoComplete:"username email",required:!0,placeholder:"usuario@empresa.com",value:o.username,onChange:h("username"),disabled:c})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contrase\xf1a"}),s.jsx(d,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,placeholder:"••••••••",value:o.password,onChange:h("password"),disabled:c})]})]}),s.jsx(l,{type:"submit",className:"w-full",disabled:c||!o.username||!o.password,children:c?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})]})}var u=r(1606),m=r(1307);function h(){let{user:e,isAuthenticated:t,isLoading:r,login:i}=(0,n.a)();(0,o.useRouter)();let[l,d]=(0,a.useState)(null);return r||t&&e?s.jsx(u.Z,{}):(0,s.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-dark-900 dark:to-dark-800 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx(m.T,{})}),s.jsx("div",{className:"w-full max-w-md",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white rounded-full mb-4 p-2 shadow-lg",children:s.jsx("img",{src:"/renovables-logo.png",alt:"Renovables del Sur MX",className:"w-full h-full object-contain"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Renovables del Sur M\xe9xico"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Accede a Renobot, nuestro asistente inteligente"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"Usa tu nombre de usuario o correo electr\xf3nico"})]}),l&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-6",role:"alert",children:s.jsx("span",{className:"block sm:inline",children:l})}),s.jsx(c,{onLoginSuccess:(e,t)=>{i(e,t)},onLoginError:e=>{d(e.includes("Authentication failed")?"Credenciales incorrectas. Por favor, verifica tu usuario y contrase\xf1a.":"Ocurri\xf3 un error inesperado. Por favor, int\xe9ntalo de nuevo.")},onInputChange:()=>d(null)}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"\xbfNecesitas ayuda? Contacta al administrador"})})]})})]})}},1606:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a(){return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900 mb-4",children:s.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full animate-spin"})}),s.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Verificando autenticaci\xf3n..."}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Un momento por favor"})]})})}},9689:(e,t,r)=>{"use strict";r.d(t,{ThemeProvider:()=>o});var s=r(326),a=r(1418);function o({children:e}){let t=(0,a.Gd)();return s.jsx(a.Ni.Provider,{value:t,children:e})}},1307:(e,t,r)=>{"use strict";r.d(t,{T:()=>l});var s=r(326),a=r(7926);let o=(0,a.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),n=(0,a.Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var i=r(1418);function l(){let{theme:e,toggleTheme:t}=(0,i.Fg)();return s.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-gray-200 dark:bg-dark-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-dark-600 transition-colors duration-200","aria-label":"Toggle theme",children:"light"===e?s.jsx(o,{className:"h-5 w-5"}):s.jsx(n,{className:"h-5 w-5"})})}},3136:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i,a:()=>l});var s=r(326),a=r(7577),o=r(8);let n=(0,a.createContext)(void 0);function i({children:e}){let[t,r]=(0,a.useState)(null),[i,l]=(0,a.useState)(!0),d=async()=>(l(!1),!1);return s.jsx(n.Provider,{value:{user:t,isLoading:i,isAuthenticated:!!t,login:(e,t)=>{o.x.setToken(t),r(e)},logout:()=>{o.x.clearToken(),r(null)},checkAuth:d},children:e})}function l(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1418:(e,t,r)=>{"use strict";r.d(t,{Fg:()=>o,Gd:()=>n,Ni:()=>a});var s=r(7577);let a=(0,s.createContext)(void 0);function o(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}function n(){let[e,t]=(0,s.useState)("light");return{theme:e,toggleTheme:()=>{let r="light"===e?"dark":"light";t(r),localStorage.setItem("theme",r),document.documentElement.classList.toggle("dark","dark"===r)}}}},8:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});let s="https://renovablesdelsurmx.online:8443/api/chatbot";class a{constructor(){this.token=null}setToken(e){this.token=e}clearToken(){this.token=null}getToken(){return this.token}getBaseUrl(){return s}async request(e,t={}){let r=`${s}${e}`,a={"Content-Type":"application/json",...t.headers};this.token&&(a.Authorization=`Bearer ${this.token}`);try{let e=await fetch(r,{...t,headers:a});if(!e.ok){if(401===e.status)throw this.clearToken(),Error("Authentication failed");throw Error(`HTTP error! status: ${e.status}`)}return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async login(e){let t=await this.request("/employee/login/",{method:"POST",body:JSON.stringify(e)});return t.success&&this.setToken(t.access),t}async getProfile(){return await this.request("/employee/profile/")}async getConversations(){return await this.request("/employee/conversations/")}async getConversation(e){return await this.request(`/employee/conversations/${e}/`)}async sendMessage(e,t){let r={message:e.message,conversation_id:e.conversation_id,has_file:e.has_file||!1,file:e.file?{name:e.file.name,size:e.file.size,type:e.file.type,extension:e.file.extension,data:e.file.data}:null,user:t?{email:t.email,username:t.username,full_name:t.employee?.full_name,department:t.employee?.department,role:t.employee?.role_name,role_code:t.employee?.role_code,employee_id:t.employee?.employee_id}:null};try{let t=Date.now(),s=await fetch("https://n8n.srv865372.hstgr.cloud/webhook/615091e3-d7c3-477d-9d64-fae01c60845b",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);let a=await s.json(),o=Date.now(),n=a[0]?.output||"Lo siento, no pude obtener una respuesta.",i=e.conversation_id||crypto.randomUUID(),l={id:Date.now(),content:e.message,is_user:!0,timestamp:new Date().toISOString(),has_file:e.has_file||!1,file:e.file},d={id:Date.now()+1,content:n,is_user:!1,timestamp:new Date().toISOString(),response_time:o-t,has_file:!1};return{conversation_id:i,user_message:l,ai_response:d,source:"n8n_webhook"}}catch(e){throw console.error("API request failed:",e),e}}async uploadFile(e,t){let r=new FormData;r.append("file",t),r.append("file_name",t.name),r.append("file_type",t.type.startsWith("image/")?"image":"document");let a={};this.token&&(a.Authorization=`Bearer ${this.token}`);try{let t=await fetch(`${s}/employee/conversations/${e}/upload/`,{method:"POST",headers:a,body:r});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(e){throw console.error("File upload failed:",e),e}}logout(){this.clearToken()}}let o=new a},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},7834:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>d});var s=r(9510),a=r(5384),o=r.n(a);r(7272);var n=r(8570);let i=(0,n.createProxy)(String.raw`/Users/maximilianocarrionorozco/Documents/Projects/chat-renomx/components/providers/ThemeProvider.tsx#ThemeProvider`),l=(0,n.createProxy)(String.raw`/Users/maximilianocarrionorozco/Documents/Projects/chat-renomx/contexts/AuthContext.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/Users/maximilianocarrionorozco/Documents/Projects/chat-renomx/contexts/AuthContext.tsx#useAuth`);let d={title:"Chat RenovMX - Renovables del Sur M\xe9xico",description:"Chatbot inteligente para Renovables del Sur M\xe9xico"};function c({children:e}){return s.jsx("html",{lang:"es",suppressHydrationWarning:!0,children:s.jsx("body",{className:o().className,children:s.jsx(l,{children:s.jsx(i,{children:e})})})})}},908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/Users/maximilianocarrionorozco/Documents/Projects/chat-renomx/app/page.tsx#default`)},7272:()=>{},7926:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(7577),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var n=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,children:d,...c},u)=>(0,s.createElement)("svg",{ref:u,...a,width:n,height:n,stroke:r,strokeWidth:l?24*Number(i)/Number(n):i,className:`lucide lucide-${o(e)}`,...c},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...(Array.isArray(d)?d:[d])||[]]));return r.displayName=`${e}`,r}}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[734],()=>r(8081));module.exports=s})();